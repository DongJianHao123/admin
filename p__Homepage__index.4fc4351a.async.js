"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[666],{94737:function($,x){var e={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"};x.Z=e},27496:function($,x,e){e.d(x,{Z:function(){return a}});var g=e(1413),E=e(67294),h={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M931.4 498.9L94.9 79.5c-3.4-1.7-7.3-2.1-11-1.2a15.99 15.99 0 00-11.7 19.3l86.2 352.2c1.3 5.3 5.2 9.6 10.4 11.3l147.7 50.7-147.6 50.7c-5.2 1.8-9.1 6-10.3 11.3L72.2 926.5c-.9 3.7-.5 7.6 1.2 10.9 3.9 7.9 13.5 11.1 21.5 7.2l836.5-417c3.1-1.5 5.6-4.1 7.2-7.1 3.9-8 .7-17.6-7.2-21.6zM170.8 826.3l50.3-205.6 295.2-101.3c2.3-.8 4.2-2.6 5-5 1.4-4.2-.8-8.7-5-10.2L221.1 403 171 198.2l628 314.9-628.2 313.2z"}}]},name:"send",theme:"outlined"},l=h,t=e(42135),r=function(m,s){return E.createElement(t.Z,(0,g.Z)((0,g.Z)({},m),{},{ref:s,icon:l}))};r.displayName="SendOutlined";var a=E.forwardRef(r)},93045:function($,x,e){e.d(x,{Z:function(){return a}});var g=e(1413),E=e(67294),h={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M288 421a48 48 0 1096 0 48 48 0 10-96 0zm352 0a48 48 0 1096 0 48 48 0 10-96 0zM512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm263 711c-34.2 34.2-74 61-118.3 79.8C611 874.2 562.3 884 512 884c-50.3 0-99-9.8-144.8-29.2A370.4 370.4 0 01248.9 775c-34.2-34.2-61-74-79.8-118.3C149.8 611 140 562.3 140 512s9.8-99 29.2-144.8A370.4 370.4 0 01249 248.9c34.2-34.2 74-61 118.3-79.8C413 149.8 461.7 140 512 140c50.3 0 99 9.8 144.8 29.2A370.4 370.4 0 01775.1 249c34.2 34.2 61 74 79.8 118.3C874.2 413 884 461.7 884 512s-9.8 99-29.2 144.8A368.89 368.89 0 01775 775zM664 533h-48.1c-4.2 0-7.8 3.2-8.1 7.4C604 589.9 562.5 629 512 629s-92.1-39.1-95.8-88.6c-.3-4.2-3.9-7.4-8.1-7.4H360a8 8 0 00-8 8.4c4.4 84.3 74.5 151.6 160 151.6s155.6-67.3 160-151.6a8 8 0 00-8-8.4z"}}]},name:"smile",theme:"outlined"},l=h,t=e(42135),r=function(m,s){return E.createElement(t.Z,(0,g.Z)((0,g.Z)({},m),{},{ref:s,icon:l}))};r.displayName="SmileOutlined";var a=E.forwardRef(r)},60014:function($,x,e){var g=e(1413),E=e(91),h=e(67294),l=e(97072),t=e(85893),r=["fieldProps","min","proFieldProps","max"],a=function(s,A){var j=s.fieldProps,d=s.min,O=s.proFieldProps,M=s.max,B=(0,E.Z)(s,r);return(0,t.jsx)(l.Z,(0,g.Z)({valueType:"digit",fieldProps:(0,g.Z)({min:d,max:M},j),ref:A,filedConfig:{defaultProps:{width:"100%"}},proFieldProps:O},B))},u=h.forwardRef(a);x.Z=u},99644:function($,x,e){var g=e(1413),E=e(91),h=e(67294),l=e(97072),t=e(85893),r=["fieldProps","proFieldProps"],a=function(m,s){var A=m.fieldProps,j=m.proFieldProps,d=(0,E.Z)(m,r);return(0,t.jsx)(l.Z,(0,g.Z)({ref:s,valueType:"textarea",fieldProps:A,proFieldProps:j},d))};x.Z=h.forwardRef(a)},47745:function($,x,e){var g=e(1413),E=e(91),h=e(67294),l=e(97072),t=e(85893),r=["fieldProps","proFieldProps"],a=["fieldProps","proFieldProps"],u="text",m=function(d){var O=d.fieldProps,M=d.proFieldProps,B=(0,E.Z)(d,r);return(0,t.jsx)(l.Z,(0,g.Z)({valueType:u,fieldProps:O,filedConfig:{valueType:u},proFieldProps:M},B))},s=function(d){var O=d.fieldProps,M=d.proFieldProps,B=(0,E.Z)(d,a);return(0,t.jsx)(l.Z,(0,g.Z)({valueType:"password",fieldProps:O,proFieldProps:M,filedConfig:{valueType:u}},B))},A=m;A.Password=s,A.displayName="ProFormComponent",x.Z=A},736:function($,x,e){e.d(x,{Z:function(){return T}});var g=e(1413),E=e(91),h=e(87462),l=e(67294),t=e(94737),r=e(18546),a=function(c,U){return l.createElement(r.Z,(0,h.Z)({},c,{ref:U,icon:t.Z}))},u=l.forwardRef(a),m=e(81961),s=e(71577),A=e(46829),j=e(44190),d=e(85893),O=["fieldProps","action","accept","listType","title","max","icon","buttonProps","onChange","disabled","proFieldProps"],M=function(c,U){var q,D=c.fieldProps,f=c.action,H=c.accept,J=c.listType,Q=c.title,se=Q===void 0?"\u5355\u51FB\u4E0A\u4F20":Q,z=c.max,Y=c.icon,G=Y===void 0?(0,d.jsx)(u,{}):Y,X=c.buttonProps,w=c.onChange,k=c.disabled,Z=c.proFieldProps,W=(0,E.Z)(c,O),b=(0,l.useMemo)(function(){var N;return(N=W.fileList)!==null&&N!==void 0?N:W.value},[W.fileList,W.value]),p=(0,l.useContext)(j.A),o=(Z==null?void 0:Z.mode)||p.mode||"edit",oe=(z===void 0||!b||(b==null?void 0:b.length)<z)&&o!=="read",ne=(J!=null?J:D==null?void 0:D.listType)==="picture-card";return(0,d.jsx)(m.Z,(0,g.Z)((0,g.Z)({action:f,accept:H,ref:U,listType:J||"picture",fileList:b},D),{},{name:(q=D==null?void 0:D.name)!==null&&q!==void 0?q:"file",onChange:function(_){var ee;w==null||w(_),D==null||(ee=D.onChange)===null||ee===void 0||ee.call(D,_)},children:oe&&(ne?(0,d.jsxs)("span",{children:[G," ",se]}):(0,d.jsxs)(s.Z,(0,g.Z)((0,g.Z)({disabled:k||(D==null?void 0:D.disabled)},X),{},{children:[G,se]})))}))},B=(0,A.G)(l.forwardRef(M),{getValueFromEvent:function(c){return c.fileList}}),T=B},35740:function($,x,e){e.r(x),e.d(x,{default:function(){return fe}});var g=e(95855),E=e(11281),h=e.n(E),l=e(12812),t=e.n(l),r=e(12741),a=e.n(r),u=e(42350),m=e(97983),s=e.n(m),A=e(40794),j=e.n(A),d=e(63154),O=e(36275);function M(C){return B.apply(this,arguments)}function B(){return B=j()(s()().mark(function C(P){return s()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,O.request)("/seller/api/teachers/getAllTeachersByConditionsWithTotal?clientId=385",{params:P}).then(function(i){return{data:(0,d.we)(i.teacherList),total:i.totalNum}}));case 1:case"end":return n.stop()}},C)})),B.apply(this,arguments)}function T(){return S.apply(this,arguments)}function S(){return S=j()(s()().mark(function C(){return s()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.abrupt("return",(0,O.request)("/seller/api/homepages?clientId.equals=385").then(function(n){var i=a()(n,1),v=i[0];return h()(h()({},v),{},{aboutUsImgUrl:[{url:v.aboutUsImgUrl}],consultUrl:[{url:v.consultUrl}],coverUrl:[{url:v.coverUrl}]})}));case 1:case"end":return y.stop()}},C)})),S.apply(this,arguments)}function c(C){return U.apply(this,arguments)}function U(){return U=j()(s()().mark(function C(P){return s()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,O.request)("/seller/api/homepages/update",{method:"post",data:P}));case 1:case"end":return n.stop()}},C)})),U.apply(this,arguments)}function q(C){return D.apply(this,arguments)}function D(){return D=j()(s()().mark(function C(P){return s()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,O.request)("/seller/api/teachers/".concat(P)).then(function(i){return h()(h()({},i),{},{avatarUrl:[{url:i.avatarUrl}]})}));case 1:case"end":return n.stop()}},C)})),D.apply(this,arguments)}function f(C){return H.apply(this,arguments)}function H(){return H=j()(s()().mark(function C(P){return s()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,O.request)("/seller/api/teachers/update",{method:"post",data:P}));case 1:case"end":return n.stop()}},C)})),H.apply(this,arguments)}function J(C){return Q.apply(this,arguments)}function Q(){return Q=j()(s()().mark(function C(P){return s()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,O.request)("/seller/api/teachers",{method:"post",data:P}));case 1:case"end":return n.stop()}},C)})),Q.apply(this,arguments)}function se(C){return z.apply(this,arguments)}function z(){return z=j()(s()().mark(function C(P){return s()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,O.request)("/seller/api/teachers/".concat(P),{method:"delete"}));case 1:case"end":return n.stop()}},C)})),z.apply(this,arguments)}var Y=e(10703),G=e(99644),X=e(97072),w=e(736),k=e(47745),Z=e(95239),W=e(12461),b=e(71577),p=e(67294),o=e(85893),oe=function(){var P=Z.Z.useForm(),y=a()(P,1),n=y[0],i=(0,p.useState)(!1),v=a()(i,2),R=v[0],K=v[1],I=function(F,ae){console.log(F),(0,d.Wi)(F).then(function(he){console.log(he),n.setFieldsValue(t()({},ae,[Object.assign(F,{url:"https://ssl.cdn.maodouketang.com/".concat(he.key)})]))})},V=JSON.parse(localStorage.getItem("client")).name||"";return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(Y.A,{form:n,onFinish:function(F){return c(h()(h()({},F),{},{aboutUsImgUrl:F.aboutUsImgUrl[0].url,consultUrl:F.consultUrl[0].url,coverUrl:F.coverUrl[0].url})).then(function(){W.ZP.success("\u4FDD\u5B58\u6210\u529F")})},request:T,labelCol:8,layout:"horizontal",style:{marginTop:20},grid:!0,children:[(0,o.jsx)(G.Z,{name:"aboutUsInfo",label:"\u673A\u6784\u4ECB\u7ECD",colProps:{md:24,xl:12},required:!0,placeholder:"\u8BF7\u8F93\u5165",labelCol:{span:4},fieldProps:{maxLength:300,showCount:!0,rows:10},rules:d.n0}),(0,o.jsx)(X.Z,{name:"help",label:"\u5E2E\u52A9",labelCol:{span:2},children:(0,o.jsx)(b.Z,{type:"primary",ghost:!0,onClick:function(){return K(!0)},children:"\u751F\u6210\u673A\u6784\u4ECB\u7ECD"})}),(0,o.jsx)(w.Z,{name:"aboutUsImgUrl",label:"\u673A\u6784\u4ECB\u7ECD\u56FE\u7247",max:1,required:!0,fieldProps:{name:"file",listType:"picture-card"},labelCol:{span:2},rules:d.n0,action:function(F){return I(F,"aboutUsImgUrl")},extra:"\u5EFA\u8BAE\u56FE\u7247\u6BD4\u4F8B\u4E3A16:9"}),(0,o.jsx)(w.Z,{name:"consultUrl",label:"\u673A\u6784Logo",max:1,required:!0,fieldProps:{name:"file",listType:"picture-card"},labelCol:{span:2},rules:d.n0,action:function(F){return I(F,"consultUrl")},extra:"\u5EFA\u8BAE\u56FE\u7247\u6BD4\u4F8B\u4E3A1:1"}),(0,o.jsx)(w.Z,{name:"coverUrl",label:"\u5C01\u9762\u56FE",max:1,required:!0,fieldProps:{name:"file",listType:"picture-card"},labelCol:{span:2},rules:d.n0,action:function(F){return I(F,"coverUrl")},extra:"\u5EFA\u8BAE\u56FE\u7247\u6BD4\u4F8B\u4E3A16:9"}),(0,o.jsx)(k.Z,{name:"icpInfo",label:"\u4E00\u53E5\u8BDD\u7B80\u4ECB",labelCol:{span:2},required:!0,placeholder:"\u8BF7\u8F93\u5165",rules:d.n0}),(0,o.jsx)(Z.Z.Item,{name:"id",noStyle:!0})]}),(0,o.jsx)(u.Z,{open:R,handleClose:function(){return K(!1)},prompt:"\u751F\u6210".concat(V,"\u673A\u6784\u7684\u7B80\u4ECB, \u957F\u5EA6\u4E0D\u8D85\u8FC7300\u4E2A\u4E2D\u6587\u5B57\u7B26")})]})},ne=oe,N=e(51042),_=e(44784),ee=e(65360),me=e(97548),re=e.n(me),le=e(14971),Ee=e(12720),ue=e(60014),ie=e(96486),Ce=["id","handleClose","tableReload"],Pe=function(P){var y=P.id,n=P.handleClose,i=P.tableReload,v=re()(P,Ce),R=Z.Z.useForm(),K=a()(R,1),I=K[0],V=(0,p.useState)(!1),L=a()(V,2),F=L[0],ae=L[1],he=(0,p.useState)(""),xe=a()(he,2),je=xe[0],Oe=xe[1];(0,p.useEffect)(function(){(0,ie.isUndefined)(y)||!v.visible||q(y).then(I.setFieldsValue)},[y,v.visible]);var De=function(){var ve=j()(s()().mark(function te(ce){var Fe;return s()().wrap(function(ge){for(;;)switch(ge.prev=ge.next){case 0:return Fe=h()(h()({tag:"star",clientId:"385"},ce),{},{avatarUrl:ce.avatarUrl[0].url}),ge.abrupt("return",((0,ie.isUndefined)(y)?J:f)(Fe).then(function(){W.ZP.success("\u4FDD\u5B58\u6210\u529F"),n(),i()}));case 2:case"end":return ge.stop()}},te)}));return function(ce){return ve.apply(this,arguments)}}(),Be=function(te){(0,d.Wi)(te).then(function(ce){I.setFieldsValue({avatarUrl:[Object.assign(te,{url:"https://ssl.cdn.maodouketang.com/".concat(ce.key)})]})})},Me=function(){var te=I.getFieldValue("name");le.Z.str.isEmpty(te)?W.ZP.warn("\u8BF7\u5148\u8F93\u5165\u6559\u5E08\u59D3\u540D"):ae(!0)};return(0,p.useEffect)(function(){F&&Oe(I.getFieldValue("name"))},[F]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(Ee.a,h()(h()({},v),{},{form:I,drawerProps:{maskClosable:!1,onClose:n,destroyOnClose:!0},title:(0,ie.isUndefined)(y)?"\u6DFB\u52A0\u6559\u5E08":"\u7F16\u8F91\u6559\u5E08",grid:!0,width:"35%",onFinish:De,children:[(0,o.jsx)(k.Z,{name:"name",label:"\u59D3\u540D",labelCol:{span:4},required:!0,placeholder:"\u8BF7\u8F93\u5165",rules:d.n0}),(0,o.jsx)(G.Z,{name:"info",label:"\u6559\u5E08\u4ECB\u7ECD",required:!0,placeholder:"\u8BF7\u8F93\u5165",labelCol:{span:4},fieldProps:{maxLength:110,showCount:!0},rules:d.n0}),(0,o.jsx)(X.Z,{children:(0,o.jsx)(b.Z,{onClick:Me,ghost:!0,type:"primary",children:"\u751F\u6210\u6559\u5E08\u4ECB\u7ECD"})}),(0,o.jsx)(ue.Z,{name:"coursesCount",label:"\u8BFE\u7A0B\u6570",required:!0,labelCol:{span:4},placeholder:"\u8BF7\u8F93\u5165",rules:d.n0}),(0,o.jsx)(ue.Z,{name:"studentsCount",label:"\u5B66\u751F\u6570",required:!0,labelCol:{span:4},placeholder:"\u8BF7\u8F93\u5165",rules:d.n0}),(0,o.jsx)(w.Z,{name:"avatarUrl",label:"\u6559\u5E08\u5934\u50CF",max:1,required:!0,labelCol:{span:4},fieldProps:{name:"file",listType:"picture-card"},rules:d.n0,action:Be,extra:"\u5EFA\u8BAE\u56FE\u7247\u6BD4\u4F8B\u4E3A1:1"}),(0,o.jsx)(Z.Z.Item,{name:"id",noStyle:!0})]})),(0,o.jsx)(u.Z,{open:F,handleClose:function(){return ae(!1)},prompt:"\u751F\u6210".concat(je,"\u8001\u5E08\u7684\u7B2C\u4E09\u4EBA\u79F0\u4ECB\u7ECD, \u957F\u5EA6\u4E0D\u8D85\u8FC7100\u4E2A\u5B57\uFF0C\u7279\u70B9\uFF1A")})]})},de=Pe,ye=function(P,y){return[{title:"\u5E8F\u53F7",dataIndex:"index",align:"center",width:80},{title:"\u59D3\u540D",dataIndex:"name"},{title:"\u6559\u5E08\u4ECB\u7ECD",dataIndex:"info",width:200,ellipsis:!0},{title:"\u8BFE\u7A0B\u6570",dataIndex:"coursesCount",align:"center",width:80},{title:"\u5B66\u751F\u6570",dataIndex:"studentsCount",align:"center",width:80},{title:"\u6559\u5E08\u5934\u50CF",dataIndex:"avatarUrl",align:"center",width:80,valueType:"image"},{title:"\u64CD\u4F5C",dataIndex:"action",align:"center",width:160,render:function(i,v){return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(b.Z,{onClick:function(){return P({visible:!0,id:v.id})},size:"small",type:"link",children:"\u7F16\u8F91"}),(0,o.jsx)(ee.Z,{title:"\u786E\u5B9A\u5220\u9664?",onConfirm:function(){return se(v.id).then(function(){y.current.reload(),W.ZP.success("\u64CD\u4F5C\u6210\u529F")})},children:(0,o.jsx)(b.Z,{size:"small",type:"link",danger:!0,children:"\u5220\u9664"})})]})}}].map(function(n){return h()({search:!1,width:120},n)})},pe=function(){var C=(0,p.useState)({visible:!1}),P=a()(C,2),y=P[0],n=P[1],i=(0,p.useRef)();return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(_.Z,{actionRef:i,pagination:null,rowKey:"id",columns:ye(n,i),search:!1,toolBarRender:function(){return(0,o.jsx)(b.Z,{onClick:function(){return n({visible:!0})},type:"primary",icon:(0,o.jsx)(N.Z,{}),children:"\u65B0\u589E"})},request:M,scroll:{y:510}}),(0,o.jsx)(de,h()(h()({},y),{},{tableReload:function(){return i.current.reload()},handleClose:function(){return n({visible:!1})}}))]})},fe=function(){return(0,o.jsx)(g._z,{tabList:[{tab:"\u673A\u6784\u9996\u9875",key:"orgHomepage",children:(0,o.jsx)(ne,{})},{tab:"\u6388\u8BFE\u540D\u5E08",key:"teacher",children:(0,o.jsx)(pe,{})}]})}},19240:function($,x,e){e.d(x,{jO:function(){return s},o$:function(){return j},rz:function(){return O}});var g=e(97983),E=e.n(g),h=e(11281),l=e.n(h),t=e(40794),r=e.n(t),a=e(9669),u=e.n(a),m="http://101.201.249.16:4000";function s(M){return A.apply(this,arguments)}function A(){return A=r()(E()().mark(function M(B){var T;return E()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,u()(m+"/api/v1/msms/inform",{method:"post",headers:{"Content-Type":"application/json"},data:JSON.stringify(l()({},B))});case 2:return T=c.sent,console.log("\u8BF7\u6C42\u7ED3\u679C",T),c.abrupt("return",T.data);case 5:case"end":return c.stop()}},M)})),A.apply(this,arguments)}function j(M){return d.apply(this,arguments)}function d(){return d=r()(E()().mark(function M(B){var T;return E()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,u().get(m+"/api/v1/msms/get_signature/?clientId=".concat(B));case 2:if(T=c.sent,T.data.errcode!==200){c.next=7;break}return c.abrupt("return",T.data.data);case 7:return c.abrupt("return","");case 8:case"end":return c.stop()}},M)})),d.apply(this,arguments)}var O=function(B,T,S){u()({method:"post",url:"https://api.os2edu.cn/api/chat-process",data:{prompt:B,options:{parentMessageId:T},systemMessage:"\u4F60\u73B0\u5728\u662F\u4E00\u4E2A\u6559\u80B2\u5DE5\u4F5C\u8005\uFF0C\u4F60\u9700\u8981\u8F85\u52A9\u6211\u7BA1\u7406\u597D\u4E00\u4E2A\u6559\u80B2\u673A\u6784\u7684\u540E\u53F0\uFF0C\u7B80\u5316\u6211\u4EEC\u7684\u5DE5\u4F5C",temperature:.8,top_p:1},onDownloadProgress:S}).then(function(){})}},14971:function($,x,e){var g=e(79742),E=e(48764),h={str:{rn2br:function(t){return t.replace(/(\r\n)|(\n)/g,"<br>")},isNull:function(t){return t===null||typeof t=="undefined"},isEmpty:function(t){return h.str.isNull(t)?!0:typeof t!="string"?!1:t.length===0},isNotEmpty:function(t){return!h.str.isEmpty(t)},trim:function(t){return t.replace(/^\s+|\s+$/gm,"")},isChinaMobile:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return t.length===11},passwordLengthValid:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return t.length<=18&&t.length>=6},randomString:function(t){for(var r="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",a=r.length,u="",m=0;m<t;m++)u+=r.charAt(Math.floor(Math.random()*a));return u}},obj:{isEmptyObj:function(t){return Object.keys(t).length===0},RemoveNulls:function(t){for(var r in t)if(Object.hasOwnProperty.call(t,r)){var a=t[r];(a===null||a==="")&&delete t[r]}return t}},date:{remainingTime:function(t){var r=parseInt((t/864e5).toString()),a=parseInt((t%(24*3600*1e3)/36e5).toString()),u=parseInt((t%36e5/6e4).toString()),m=parseInt((t%6e4/1e3).toString()),s="";return r>0&&(s=r+"\u5929"),a>0&&(s=s+(a+"\u65F6")),u>0&&(s=s+(u+"\u5206")),s=s+(m+"\u79D2"),s},remainingHour:function(t){var r=t>=0?"":"-",a=t>=0?t:t*-1,u=parseInt((a/3600).toString()),m=parseInt((a%3600/60).toString());return u>=0&&(r=r+(u+"\u65F6")),m>=0&&(r=r+(m+"\u5206")),r},format:function(t,r){if(!t||!r)return null;var a=r,u={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours()%12===0?12:t.getHours()%12,"H+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()},m={0:"\u65E5",1:"\u4E00",2:"\u4E8C",3:"\u4E09",4:"\u56DB",5:"\u4E94",6:"\u516D"};/(y+)/.test(a)&&(a=a.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length))),/(E+)/.test(a)&&(a=a.replace(RegExp.$1,(RegExp.$1.length>1?RegExp.$1.length>2?"\u661F\u671F":"\u5468":"")+m[t.getDay()+""]));for(var s in u)new RegExp("("+s+")").test(a)&&(a=a.replace(RegExp.$1,RegExp.$1.length===1?u[s]:("00"+u[s]).substr((""+u[s]).length)));return a}},htmlstr:{html2dom:function(t){var r=document.createElement("div");return r.innerHTML=t,r}},url:{getDomainFromUrl:function(t){var r=t.indexOf("//"),a=t.indexOf("/",r+2);return a===-1?t.substring(r+2):t.substring(r+2,a)}},base64:{getBlobBydataURI:function(t,r){for(var a=atob((t||"").split(",")[1]),u=[],m=0;m<a.length;m++)u.push(a.charCodeAt(m));return new Blob([new Uint8Array(u)],{type:r})},encode:function(t){return g.fromByteArray(E.lW.from(t))}},array:{swap:function(t,r,a){return t[r]=t.splice(a,1,t[r])[0],t},remove:function(t,r){return isNaN(r)||r>t.length?[]:(t.splice(r,1),t)},insert:function(t,r,a){return t.splice(r,0,a),t},insertLast:function(t,r){return t.splice(t.length,0,r),t}}};x.Z=h},42350:function($,x,e){e.d(x,{Z:function(){return Q}});var g=e(97983),E=e.n(g),h=e(40794),l=e.n(h),t=e(64129),r=e.n(t),a=e(12741),u=e.n(a),m=e(14971),s=e(19240),A=e(93045),j=e(82061),d=e(27496),O=e(12461),M=e(85402),B=e(23613),T=e(24093),S=e(71577),c=e(30124),U=e(67294),q=e(20640),D=e.n(q),f=e(85893),H="chatgpt_history",J=function(z){var Y,G,X=z.open,w=z.handleClose,k=z.prompt,Z=(0,U.useRef)(null),W=(0,U.useState)([]),b=u()(W,2),p=b[0],o=b[1],oe=(0,U.useState)(!1),ne=u()(oe,2),N=ne[0],_=ne[1],ee=(0,U.useState)(k),me=u()(ee,2),re=me[0],le=me[1],Ee=O.ZP.useMessage(),ue=u()(Ee,2),ie=ue[0],Ce=ue[1],Pe=function(){var i;p=(i=p)!==null&&i!==void 0?i:[];var v={index:p.length+1,createdAt:m.Z.date.format(new Date,"yyyy/MM/dd HH:mm:ss"),user:"admin",question:re,answer:"",isEnd:!1};p.push(v),o(r()(p))},de=function(){Z.current&&(console.log(Z),Z.current.scrollTop=Z.current.scrollHeight)},ye=function(){localStorage.setItem(H,JSON.stringify(p))},pe=function(i){var v=JSON.parse(i);p[p.length-1].answer=v.text,v.delta||(p[p.length-1].id=v.id,p[p.length-1].parentMessageId=v.parentMessageId,p[p.length-1].isEnd=!0,ye(),_(!1)),o(r()(p)),de()},fe=function(){var i;if(!(m.Z.str.isEmpty(re)||N)){var v=p?(i=p[p.length-1])===null||i===void 0?void 0:i.id:"";_(!0),Pe();var R=re;le("");try{(0,s.rz)(R,v,function(K){var I=K.target,V=I.responseText,L=V.lastIndexOf(`
`,V.length-2),F=V;L!==-1&&(F=V.substring(L));try{console.log(F),pe(F)}catch(ae){console.log(ae)}})}catch(K){pe(JSON.stringify({id:"",parentMessageId:"",text:"\u7F51\u7EDC\u597D\u50CF\u51FA\u9519\u4E86\uFF0C\u8BF7\u91CD\u8BD5\uFF01"}))}}},C=function(i){i.code==="Enter"&&!N&&fe()},P=function(){M.Z.confirm({style:{zIndex:"1002"},open:!0,title:"\u6E05\u7A7A\u8BB0\u5F55",content:"\u786E\u5B9A\u6E05\u7A7A\u548CChatGPT\u7684\u804A\u5929\u8BB0\u5F55\u5417",onOk:function(){var i=l()(E()().mark(function R(){return E()().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:localStorage.removeItem(H),o([]),ie.success("\u5DF2\u6E05\u7A7A\u8BB0\u5F55");case 3:case"end":return I.stop()}},R)}));function v(){return i.apply(this,arguments)}return v}()})},y=function(i){D()(i),O.ZP.success("\u5DF2\u590D\u5236\u5230\u526A\u8D34\u677F")};return(0,U.useEffect)(function(){le(k)},[k]),(0,U.useEffect)(function(){try{o(JSON.parse(localStorage.getItem(H)||""))}catch(n){localStorage.removeItem(H)}},[]),(0,U.useEffect)(function(){X&&de()},[X,p,p.length]),(0,f.jsxs)(f.Fragment,{children:[Ce,(0,f.jsxs)(B.Z,{className:"chatgpt-container",title:(0,f.jsx)("div",{className:"title",children:"ChatGPT\u5C0F\u52A9\u624B"}),placement:"left",width:600,closeIcon:(0,f.jsx)(f.Fragment,{}),onClose:w,maskClosable:!0,destroyOnClose:!0,open:X,style:{zIndex:"1000"},children:[(0,f.jsx)("ul",{ref:Z,children:((Y=p)===null||Y===void 0?void 0:Y.length)>0?p.map(function(n){var i=n.index,v=n.question,R=n.answer,K=n.createdAt,I=n.isEnd;return(0,f.jsxs)("li",{children:[(0,f.jsxs)("div",{className:"question",children:[(0,f.jsx)(T.C,{size:40,style:{minWidth:"40px",backgroundColor:"#1890FF",verticalAlign:"middle"},gap:1,children:"admin"}),(0,f.jsxs)("div",{className:"content",children:[(0,f.jsx)("div",{className:"time",children:K}),(0,f.jsx)("p",{children:v})]})]}),(0,f.jsxs)("div",{className:"answer",children:[(0,f.jsx)("img",{className:"avatar",src:"/icons/chatgpt-logo.jpg"}),(0,f.jsxs)("div",{className:"content",children:[(0,f.jsx)("div",{className:"time",children:K}),(0,f.jsxs)("p",{children:[R,(0,f.jsx)("br",{}),I&&R&&(0,f.jsx)(S.Z,{style:{float:"right"},type:"link",onClick:function(){return y(R)},children:"\u590D\u5236"})]})]})]})]},i)}):(0,f.jsxs)("div",{className:"empty-chat",children:[(0,f.jsx)(A.Z,{}),(0,f.jsx)("span",{children:"\u8BF7\u5411\u6211\u63D0\u95EE\u5427~"})]})}),(0,f.jsxs)("div",{className:"footer",children:[(0,f.jsx)(S.Z,{className:"clear-btn",disabled:N||!p||((G=p)===null||G===void 0?void 0:G.length)<1,onClick:function(){return P()},children:(0,f.jsx)(j.Z,{})}),(0,f.jsx)(c.Z,{autoFocus:!0,onFocus:function(){return de()},onKeyDown:function(i){return C(i)},value:re,onChange:function(i){return le(i.target.value)},className:"input",placeholder:"\u8BF7\u8F93\u5165\u60A8\u7684\u95EE\u9898"}),(0,f.jsx)(S.Z,{className:"send-btn",disabled:N,onClick:function(){return fe()},icon:(0,f.jsx)(d.Z,{}),type:"primary",children:"\u53D1\u9001"})]})]},"left")]})},Q=J}}]);
