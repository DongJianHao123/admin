"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[949],{28161:function(ge,K,e){e.r(K),e.d(K,{default:function(){return ae}});var V=e(97983),s=e.n(V),$=e(40794),d=e.n($),t=e(12741),u=e.n(t),m=e(11281),l=e.n(m),y=e(14971),o=e(13714),j=e(63154),L=e(51042),J=e(8601),q=e(93056),x=e(71577),S=e(65360),v=e(67294),O=e(97548),b=e.n(O),A=e(42350),ie=e(12461),ce=e(84057),f=e(71167),H=e.n(f),c=e(85893),se=function(B){var _=(0,v.useRef)(null),M=function(){var n=d()(s()().mark(function i(){var r;return s()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:r=document.createElement("input"),r.setAttribute("type","file"),r.setAttribute("accept","image/*"),r.click(),r.onchange=function(){var I=r.files[0],w=ie.ZP.loading("\u4E0A\u4F20\u4E2D...",0);(0,j.Wi)(I).then(function(z){var F,E="https://ssl.cdn.maodouketang.com/".concat(z.key),h=_==null||(F=_.current)===null||F===void 0?void 0:F.getEditor(),P=h.getSelection().index;h.insertEmbed(P,"image",E),h.setSelection(P+1),w()})};case 5:case"end":return C.stop()}},i)}));return function(){return n.apply(this,arguments)}}(),a=(0,v.useMemo)(function(){return{toolbar:{container:[["bold","italic","underline","strike","blockquote","code-block"],[{align:[]}],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],["link","image","video"],[{header:[1,2,3,4,5,6,!1]}],[{font:[]}],[{background:["rgb(  0,   0,   0)","rgb(230,   0,   0)","rgb(255, 153,   0)","rgb(255, 255,   0)","rgb(  0, 138,   0)","rgb(  0, 102, 204)","rgb(153,  51, 255)","rgb(255, 255, 255)","rgb(250, 204, 204)","rgb(255, 235, 204)","rgb(255, 255, 204)","rgb(204, 232, 204)","rgb(204, 224, 245)","rgb(235, 214, 255)","rgb(187, 187, 187)","rgb(240, 102, 102)","rgb(255, 194, 102)","rgb(255, 255, 102)","rgb(102, 185, 102)","rgb(102, 163, 224)","rgb(194, 133, 255)","rgb(136, 136, 136)","rgb(161,   0,   0)","rgb(178, 107,   0)","rgb(178, 178,   0)","rgb(  0,  97,   0)","rgb(  0,  71, 178)","rgb(107,  36, 178)","rgb( 68,  68,  68)","rgb( 92,   0,   0)","rgb(102,  61,   0)","rgb(102, 102,   0)","rgb(  0,  55,   0)","rgb(  0,  41, 102)","rgb( 61,  20,  10)"]}],[{color:["rgb(  0,   0,   0)","rgb(230,   0,   0)","rgb(255, 153,   0)","rgb(255, 255,   0)","rgb(  0, 138,   0)","rgb(  0, 102, 204)","rgb(153,  51, 255)","rgb(255, 255, 255)","rgb(250, 204, 204)","rgb(255, 235, 204)","rgb(255, 255, 204)","rgb(204, 232, 204)","rgb(204, 224, 245)","rgb(235, 214, 255)","rgb(187, 187, 187)","rgb(240, 102, 102)","rgb(255, 194, 102)","rgb(255, 255, 102)","rgb(102, 185, 102)","rgb(102, 163, 224)","rgb(194, 133, 255)","rgb(136, 136, 136)","rgb(161,   0,   0)","rgb(178, 107,   0)","rgb(178, 178,   0)","rgb(  0,  97,   0)","rgb(  0,  71, 178)","rgb(107,  36, 178)","rgb( 68,  68,  68)","rgb( 92,   0,   0)","rgb(102,  61,   0)","rgb(102, 102,   0)","rgb(  0,  55,   0)","rgb(  0,  41, 102)","rgb( 61,  20,  10)"]}],["clean"]],handlers:{image:M},history:{delay:500,maxStack:100,userOnly:!0}}}},[]);return(0,c.jsx)(H(),l()({ref:_,theme:"snow",placeholder:"\u8BF7\u8F93\u5165",modules:a,style:{height:600}},B))},ve=se,de=e(19240),ue=e(184),U=e(5966),ee=e(64317),k=e(31199),le=e(77636),N=e(98536),me=e(36275),W=e(95239),g=e(15746),R=e(96486),fe=["id","handleClose","tableReload"],re=function(B){var _=B.id,M=B.handleClose,a=B.tableReload,n=b()(B,fe),i=W.Z.useForm(),r=u()(i,1),p=r[0],C=(0,v.useState)(!1),I=u()(C,2),w=I[0],z=I[1],F=(0,v.useState)(!1),E=u()(F,2),h=E[0],P=E[1],Y=(0,v.useState)(""),Q=u()(Y,2),X=Q[0],oe=Q[1],Ee=(0,v.useState)(""),pe=u()(Ee,2),Ce=pe[0],Be=pe[1],Oe=function(Z){Be(Z)},Ie=function(Z){(0,j.Wi)(Z).then(function(D){p.setFieldsValue({coverUrl:[Object.assign(Z,{url:"https://ssl.cdn.maodouketang.com/".concat(D.key)})]})})},Pe=(0,me.useRequest)(o.qm,{manual:!0}),xe=Pe.run,De=(0,me.useRequest)(o.No,{manual:!0}),Me=De.run,Fe=function(){var T=d()(s()().mark(function Z(D){var je,_e,be;return s()().wrap(function(ye){for(;;)switch(ye.prev=ye.next){case 0:return je=u()(D.coverUrl,1),_e=je[0],be=l()(l()({},D),{},{coverUrl:_e.url}),ye.abrupt("return",((0,R.isUndefined)(_)?(0,o.P6)(be):(0,o.Hf)(be)).then(function(){a(),M()}));case 3:case"end":return ye.stop()}},Z)}));return function(D){return T.apply(this,arguments)}}(),Se=function(){var Z=p.getFieldValue("title");y.Z.str.isEmpty(Z)?ie.ZP.warn("\u8BF7\u5148\u8F93\u5165\u8BFE\u7A0B\u540D\u79F0"):P(!0)};return(0,v.useEffect)(function(){(0,R.isUndefined)(_)?n.visible&&xe().then(function(T){return p.setFieldsValue({courseId:100+ +T+1})}):Me(_).then(p.setFieldsValue)},[_,n.visible]),(0,v.useEffect)(function(){h&&oe(p.getFieldValue("title"))},[h]),(0,c.jsxs)(c.Fragment,{children:["    ",(0,v.createElement)(ue.a,l()(l()({},n),{},{form:p,drawerProps:{maskClosable:!1,onClose:M,destroyOnClose:!0},width:"60%",key:"right",title:(0,R.isUndefined)(_)?"\u521B\u5EFA\u8BFE\u7A0B":"\u7F16\u8F91\u8BFE\u7A0B",grid:!0,initialValues:{web_site_name:"all"},onFinish:Fe}),(0,c.jsx)(U.Z,{name:"title",label:"\u8BFE\u7A0B\u540D\u79F0",colProps:{md:24,xl:24},required:!0,placeholder:"\u8BF7\u8F93\u5165",rules:j.n0}),(0,c.jsx)(U.Z,{name:"summary",label:"\u4E00\u53E5\u8BDD\u7B80\u4ECB",colProps:{md:24,xl:24},required:!0,placeholder:"\u8BF7\u8F93\u5165",rules:j.n0}),(0,c.jsx)(ee.Z,{label:"\u8BFE\u7A0B\u7C7B\u578B",name:"type",colProps:{md:12,xl:8},required:!0,placeholder:"\u8BF7\u9009\u62E9",rules:j.n0,request:d()(s()().mark(function T(){return s()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.abrupt("return",[{value:3,label:"\u5C0F\u73ED\u8BFE(15\u4EBA\u4EE5\u4E0B)"},{value:6,label:"\u5927\u73ED\u8BFE(16\u4EBA\u4EE5\u4E0A)"}]);case 1:case"end":return D.stop()}},T)}))}),(0,c.jsx)(ee.Z,{label:"\u70ED\u95E8/\u975E\u70ED\u95E8",name:"tag",colProps:{md:12,xl:8},required:!0,placeholder:"\u8BF7\u9009\u62E9",rules:j.n0,request:d()(s()().mark(function T(){return s()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.abrupt("return",[{value:"hot",label:"\u70ED\u95E8"},{value:"notHot",label:"\u975E\u70ED\u95E8"}]);case 1:case"end":return D.stop()}},T)}))}),(0,c.jsx)(k.Z,{name:"courseIndex",label:"\u6392\u5E8F",colProps:{md:12,xl:8},required:!0,placeholder:"\u8BF7\u8F93\u5165",rules:j.n0}),(0,c.jsx)(k.Z,{name:"oldPrice",label:"\u539F\u4EF7",colProps:{md:12,xl:8},required:!0,placeholder:"\u8BF7\u8F93\u5165",rules:j.n0}),(0,c.jsx)(k.Z,{name:"price",label:"\u73B0\u4EF7",colProps:{md:12,xl:8},required:!0,placeholder:"\u8BF7\u8F93\u5165",rules:j.n0}),(0,c.jsx)(U.Z,{name:"teacher",label:"\u4EFB\u8BFE\u6559\u5E08",colProps:{md:12,xl:16},placeholder:"\u8BF7\u8F93\u5165"}),(0,c.jsx)(U.Z,{name:"gradeLevel",label:"\u7B49\u7EA7",colProps:{md:12,xl:16},placeholder:"\u8BF7\u8F93\u5165"}),(0,c.jsx)(le.Z,{name:"coverUrl",label:"\u8BFE\u7A0B\u56FE\u7247",max:1,required:!0,fieldProps:{name:"file",listType:"picture-card"},rules:j.n0,action:Ie,extra:"\u5EFA\u8BAE\u56FE\u7247\u6BD4\u4F8B\u4E3A16:9",accept:"image/*"}),(0,c.jsx)(N.Z,{children:(0,c.jsx)(x.Z,{ghost:!0,onClick:function(){return Se()},type:"primary",children:"\u751F\u6210\u8BFE\u7A0B\u4ECB\u7ECD"})}),(0,c.jsx)(g.Z,{span:24,children:(0,c.jsx)(W.Z.Item,{label:"\u8BFE\u7A0B\u4ECB\u7ECD",name:"introduction",required:!0,rules:[{validator:function(Z,D){return(0,R.isEmpty)(D.replace("<p><br></p>",""))?Promise.reject(new Error("\u8BF7\u586B\u5199\u6B64\u9879")):Promise.resolve()}}],children:(0,c.jsx)(ve,{})})}),(0,c.jsx)(W.Z.Item,{name:"courseId",noStyle:!0}),(0,c.jsx)(W.Z.Item,{name:"id",noStyle:!0})),(0,c.jsx)(A.Z,{open:h,handleClose:function(){return P(!1)},prompt:"\u300A".concat(X,"\u300B\u7684\u8BFE\u7A0B\u5927\u7EB2")})]})},te=re,ne=function(B,_){return[{title:"\u5E8F\u53F7",dataIndex:"index",align:"center",width:80},{title:"\u8BFE\u7A0B\u53F7",dataIndex:"courseId",search:!0,hideInTable:!0},{title:"\u8BFE\u7A0B\u540D\u79F0",dataIndex:"title",width:200,search:!0,ellipsis:!0},{title:"\u6559\u5BA4ID",dataIndex:"roomId",align:"center"},{title:"\u4E3B\u8BB2\u6559\u5E08",dataIndex:"teacher",align:"center"},{title:"\u62A5\u540D\u4EBA\u6570",dataIndex:"applyCount",align:"center"},{title:"\u8BFE\u7A0B\u4EF7\u683C",dataIndex:"price",align:"center"},{title:"\u64CD\u4F5C",dataIndex:"action",align:"center",width:300,fixed:"right",render:function(a,n){return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(x.Z,{size:"small",type:"link",onClick:function(){return j.m8.push({pathname:"/course/member-manage/".concat(n.courseId),search:{uniCourseId:n.id}})},children:"\u6210\u5458\u7BA1\u7406"}),(0,c.jsx)(x.Z,{size:"small",type:"link",onClick:function(){return j.m8.push({pathname:"/course/classroom-manage/".concat(n.courseId),search:{courseName:n.title,roomId:n.roomId,courseId:n.courseId}})},children:"\u8BFE\u5802\u7BA1\u7406"}),(0,c.jsx)(x.Z,{onClick:function(){return B(n)},size:"small",type:"link",children:"\u7F16\u8F91"}),(0,c.jsx)(S.Z,{title:"\u786E\u5B9A\u5220\u9664?",onConfirm:function(){return(0,o.Hf)({id:n.id,isDelete:0}).then(function(){_.current.reload()})},children:(0,c.jsx)(x.Z,{size:"small",type:"link",danger:!0,children:"\u5220\u9664"})})]})}}].map(function(M){return l()({search:!1,width:120},M)})},he=function(){var B=(0,v.useState)({visible:!1}),_=u()(B,2),M=_[0],a=_[1],n=(0,v.useRef)(),i=function(C){a({visible:!0,id:C==null?void 0:C.id})},r=function(C){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],w={};return I.forEach(function(z){w[z]=C[z]}),w};return(0,c.jsxs)(J._z,{children:[(0,c.jsx)(q.Z,{actionRef:n,pagination:null,rowKey:"id",columns:ne(i,n),request:function(){var p=d()(s()().mark(function C(I){var w;return s()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return w=r(I,["title","courseId","current","pageSize"]),y.Z.obj.RemoveNulls(w),F.next=4,(0,o.wA)(w);case 4:return F.abrupt("return",F.sent);case 5:case"end":return F.stop()}},C)}));return function(C){return p.apply(this,arguments)}}(),scroll:{y:458},toolBarRender:function(){return(0,c.jsx)(x.Z,{onClick:function(){return i()},icon:(0,c.jsx)(L.Z,{}),type:"primary",children:"\u521B\u5EFA\u8BFE\u7A0B"},"button")}}),(0,c.jsx)(te,l()(l()({},M),{},{tableReload:function(){return n.current.reload()},handleClose:function(){return a({visible:!1})}}))]})},ae=he},19240:function(ge,K,e){e.d(K,{jO:function(){return o},o$:function(){return L},rz:function(){return q}});var V=e(97983),s=e.n(V),$=e(11281),d=e.n($),t=e(40794),u=e.n(t),m=e(9669),l=e.n(m),y="http://101.201.249.16:4000";function o(x){return j.apply(this,arguments)}function j(){return j=u()(s()().mark(function x(S){var v;return s()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,l()(y+"/api/v1/msms/inform",{method:"post",headers:{"Content-Type":"application/json"},data:JSON.stringify(d()({},S))});case 2:return v=b.sent,console.log("\u8BF7\u6C42\u7ED3\u679C",v),b.abrupt("return",v.data);case 5:case"end":return b.stop()}},x)})),j.apply(this,arguments)}function L(x){return J.apply(this,arguments)}function J(){return J=u()(s()().mark(function x(S){var v;return s()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,l().get(y+"/api/v1/msms/get_signature/?clientId=".concat(S));case 2:if(v=b.sent,v.data.errcode!==200){b.next=7;break}return b.abrupt("return",v.data.data);case 7:return b.abrupt("return","");case 8:case"end":return b.stop()}},x)})),J.apply(this,arguments)}var q=function(S,v,O){l()({method:"post",url:"https://api.os2edu.cn/api/chat-process",data:{prompt:S,options:{parentMessageId:v},systemMessage:"\u4F60\u73B0\u5728\u662F\u4E00\u4E2A\u6559\u80B2\u5DE5\u4F5C\u8005\uFF0C\u4F60\u9700\u8981\u8F85\u52A9\u6211\u7BA1\u7406\u597D\u4E00\u4E2A\u6559\u80B2\u673A\u6784\u7684\u540E\u53F0\uFF0C\u7B80\u5316\u6211\u4EEC\u7684\u5DE5\u4F5C",temperature:.8,top_p:1},onDownloadProgress:O}).then(function(){})}},13714:function(ge,K,e){e.d(K,{$H:function(){return _},EP:function(){return c},Gr:function(){return f},Hf:function(){return g},No:function(){return te},P6:function(){return me},Rq:function(){return ee},Zy:function(){return v},_I:function(){return G},fZ:function(){return b},hS:function(){return ie},qY:function(){return ue},qm:function(){return fe},se:function(){return he},so:function(){return le},wA:function(){return x}});var V=e(97983),s=e.n(V),$=e(11281),d=e.n($),t=e(97548),u=e.n(t),m=e(40794),l=e.n(m),y=e(63154),o=e(36275),j=e(27484),L=e.n(j),J=["classroomStatus"],q=["coverUrl"];function x(a){return S.apply(this,arguments)}function S(){return S=l()(s()().mark(function a(n){return s()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,o.request)("/seller/api/coursesget/getAllCoursesByConditionsWithTotal?clientId=385&isDelete=1",{params:d()({},n)}).then(function(p){return{data:(0,y.we)(p.courseList,n),total:p.totalNum,success:!0}}));case 1:case"end":return r.stop()}},a)})),S.apply(this,arguments)}function v(a){return O.apply(this,arguments)}function O(){return O=l()(s()().mark(function a(n){return s()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,o.request)("/seller/api/students/getAllStudentsByConditionsWithTotal?clientId=385",{params:n}).then(function(p){return{data:(0,y.we)(p.studentList,n),total:p.totalNum,success:!0}}));case 1:case"end":return r.stop()}},a)})),O.apply(this,arguments)}function b(a){return A.apply(this,arguments)}function A(){return A=l()(s()().mark(function a(n){return s()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,o.request)("/seller/api/students",{method:"post",data:n}));case 1:case"end":return r.stop()}},a)})),A.apply(this,arguments)}function ie(a){return ce.apply(this,arguments)}function ce(){return ce=l()(s()().mark(function a(n){return s()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,o.request)("/seller/api/students/update",{method:"post",data:n}));case 1:case"end":return r.stop()}},a)})),ce.apply(this,arguments)}function f(a){return H.apply(this,arguments)}function H(){return H=l()(s()().mark(function a(n){return s()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,o.request)("/seller/api/students/".concat(n)));case 1:case"end":return r.stop()}},a)})),H.apply(this,arguments)}function c(a){return se.apply(this,arguments)}function se(){return se=l()(s()().mark(function a(n){return s()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,o.request)("/seller/api/students/".concat(n),{method:"delete"}));case 1:case"end":return r.stop()}},a)})),se.apply(this,arguments)}var ve={ended:function(n){return n.type===2&&n.endAt&&L()(n.startAt).isBefore(L()())},notStarted:function(n){return n.type===2&&L()().isBefore(n.startAt)},ongoing:function(n){return n.type===2&&!n.endAt&&L()(n.startAt).isBefore(L()())},video:function(n){return n.type===1}},de=function(n,i){return n.find(function(r){return ve[r](i)})};function ue(a){return U.apply(this,arguments)}function U(){return U=l()(s()().mark(function a(n){var i,r,p;return s()().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return i=n.classroomStatus,r=i===void 0?[]:i,p=u()(n,J),I.abrupt("return",(0,o.request)("/seller/api/course-classes?page=0&size=1000&clientId.equals=385&sort=startAt,desc&hasHomework=1",{params:p}).then(function(w){var z=w.filter(function(F){return de(r,F)});return{data:(0,y.we)(z,p),success:!0}}));case 2:case"end":return I.stop()}},a)})),U.apply(this,arguments)}function ee(a){return k.apply(this,arguments)}function k(){return k=l()(s()().mark(function a(n){return s()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,o.request)("/seller/api/course-classes/update",{method:"post",data:n}));case 1:case"end":return r.stop()}},a)})),k.apply(this,arguments)}function le(a){return N.apply(this,arguments)}function N(){return N=l()(s()().mark(function a(n){return s()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,o.request)("/seller/api/course-classes/delete/".concat(n)));case 1:case"end":return r.stop()}},a)})),N.apply(this,arguments)}function me(a){return W.apply(this,arguments)}function W(){return W=l()(s()().mark(function a(n){return s()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,o.request)("/seller/api/courses",{method:"post",data:d()({teacher:"",clientId:"385",client:{},isDelete:1},n)}));case 1:case"end":return r.stop()}},a)})),W.apply(this,arguments)}function g(a){return R.apply(this,arguments)}function R(){return R=l()(s()().mark(function a(n){return s()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,o.request)("/seller/api/courses/update",{method:"post",data:n}));case 1:case"end":return r.stop()}},a)})),R.apply(this,arguments)}function fe(){return re.apply(this,arguments)}function re(){return re=l()(s()().mark(function a(){return s()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,o.request)("/seller/api/coursesget/getAllCoursesByConditionsWithTotal?clientId=385").then(function(r){return r.totalNum}));case 1:case"end":return i.stop()}},a)})),re.apply(this,arguments)}function te(a){return ne.apply(this,arguments)}function ne(){return ne=l()(s()().mark(function a(n){return s()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,o.request)("/seller/api/courses/".concat(n)).then(function(p){var C=p.coverUrl,I=u()(p,q);return d()({coverUrl:[{url:C}]},I)}));case 1:case"end":return r.stop()}},a)})),ne.apply(this,arguments)}function he(a){return ae.apply(this,arguments)}function ae(){return ae=l()(s()().mark(function a(n){var i;return s()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,(0,o.request)("/seller/api/course-classes/".concat(n));case 2:return i=p.sent,p.abrupt("return",d()(d()({},i),{},{coverUrl:[{url:i.coverUrl}]}));case 4:case"end":return p.stop()}},a)})),ae.apply(this,arguments)}function G(a){return B.apply(this,arguments)}function B(){return B=l()(s()().mark(function a(n){return s()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,o.request)("/seller/api/course-classes",{method:"post",data:d()({clientId:"385"},n)}));case 1:case"end":return r.stop()}},a)})),B.apply(this,arguments)}function _(a){return M.apply(this,arguments)}function M(){return M=l()(s()().mark(function a(n){return s()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,o.request)("/seller/api/course-classes/update",{method:"post",data:n}));case 1:case"end":return r.stop()}},a)})),M.apply(this,arguments)}},14971:function(ge,K,e){var V=e(79742),s=e(48764),$={str:{rn2br:function(t){return t.replace(/(\r\n)|(\n)/g,"<br>")},isNull:function(t){return t===null||typeof t=="undefined"},isEmpty:function(t){return $.str.isNull(t)?!0:typeof t!="string"?!1:t.length===0},isNotEmpty:function(t){return!$.str.isEmpty(t)},trim:function(t){return t.replace(/^\s+|\s+$/gm,"")},isChinaMobile:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return t.length===11},passwordLengthValid:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return t.length<=18&&t.length>=6},randomString:function(t){for(var u="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",m=u.length,l="",y=0;y<t;y++)l+=u.charAt(Math.floor(Math.random()*m));return l}},obj:{isEmptyObj:function(t){return Object.keys(t).length===0},RemoveNulls:function(t){for(var u in t)if(Object.hasOwnProperty.call(t,u)){var m=t[u];(m===null||m==="")&&delete t[u]}return t}},date:{remainingTime:function(t){var u=parseInt((t/864e5).toString()),m=parseInt((t%(24*3600*1e3)/36e5).toString()),l=parseInt((t%36e5/6e4).toString()),y=parseInt((t%6e4/1e3).toString()),o="";return u>0&&(o=u+"\u5929"),m>0&&(o=o+(m+"\u65F6")),l>0&&(o=o+(l+"\u5206")),o=o+(y+"\u79D2"),o},format:function(t,u){if(!t||!u)return null;var m=u,l={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours()%12===0?12:t.getHours()%12,"H+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()},y={0:"\u65E5",1:"\u4E00",2:"\u4E8C",3:"\u4E09",4:"\u56DB",5:"\u4E94",6:"\u516D"};/(y+)/.test(m)&&(m=m.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length))),/(E+)/.test(m)&&(m=m.replace(RegExp.$1,(RegExp.$1.length>1?RegExp.$1.length>2?"\u661F\u671F":"\u5468":"")+y[t.getDay()+""]));for(var o in l)new RegExp("("+o+")").test(m)&&(m=m.replace(RegExp.$1,RegExp.$1.length===1?l[o]:("00"+l[o]).substr((""+l[o]).length)));return m}},htmlstr:{html2dom:function(t){var u=document.createElement("div");return u.innerHTML=t,u}},url:{getDomainFromUrl:function(t){var u=t.indexOf("//"),m=t.indexOf("/",u+2);return m===-1?t.substring(u+2):t.substring(u+2,m)}},base64:{getBlobBydataURI:function(t,u){for(var m=atob((t||"").split(",")[1]),l=[],y=0;y<m.length;y++)l.push(m.charCodeAt(y));return new Blob([new Uint8Array(l)],{type:u})},encode:function(t){return V.fromByteArray(s.lW.from(t))}},array:{swap:function(t,u,m){return t[u]=t.splice(m,1,t[u])[0],t},remove:function(t,u){return isNaN(u)||u>t.length?[]:(t.splice(u,1),t)},insert:function(t,u,m){return t.splice(u,0,m),t},insertLast:function(t,u){return t.splice(t.length,0,u),t}}};K.Z=$},42350:function(ge,K,e){e.d(K,{Z:function(){return se}});var V=e(97983),s=e.n(V),$=e(40794),d=e.n($),t=e(64129),u=e.n(t),m=e(12741),l=e.n(m),y=e(14971),o=e(19240),j=e(93045),L=e(82061),J=e(27496),q=e(12461),x=e(85402),S=e(63463),v=e(24093),O=e(71577),b=e(30124),A=e(67294),ie=e(20640),ce=e.n(ie),f=e(85893),H="chatgpt_history",c=function(de){var ue,U,ee=de.open,k=de.handleClose,le=de.prompt,N=(0,A.useRef)(null),me=(0,A.useState)([]),W=l()(me,2),g=W[0],R=W[1],fe=(0,A.useState)(!1),re=l()(fe,2),te=re[0],ne=re[1],he=(0,A.useState)(le),ae=l()(he,2),G=ae[0],B=ae[1],_=q.ZP.useMessage(),M=l()(_,2),a=M[0],n=M[1],i=function(){var h;g=(h=g)!==null&&h!==void 0?h:[];var P={index:g.length+1,createdAt:y.Z.date.format(new Date,"yyyy/MM/dd HH:mm:ss"),user:"admin",question:G,answer:"",isEnd:!1};g.push(P),R(u()(g))},r=function(){N.current&&(console.log(N),N.current.scrollTop=N.current.scrollHeight)},p=function(){localStorage.setItem(H,JSON.stringify(g))},C=function(h){var P=JSON.parse(h);g[g.length-1].answer=P.text,P.delta||(g[g.length-1].id=P.id,g[g.length-1].parentMessageId=P.parentMessageId,g[g.length-1].isEnd=!0,p(),ne(!1)),R(u()(g)),r()},I=function(){var h;if(!(y.Z.str.isEmpty(G)||te)){var P=g?(h=g[g.length-1])===null||h===void 0?void 0:h.id:"";ne(!0),i();var Y=G;B("");try{(0,o.rz)(Y,P,function(Q){var X=Q.target,oe=X.responseText,Ee=oe.lastIndexOf(`
`,oe.length-2),pe=oe;Ee!==-1&&(pe=oe.substring(Ee));try{console.log(pe),C(pe)}catch(Ce){console.log(Ce)}})}catch(Q){C(JSON.stringify({id:"",parentMessageId:"",text:"\u7F51\u7EDC\u597D\u50CF\u51FA\u9519\u4E86\uFF0C\u8BF7\u91CD\u8BD5\uFF01"}))}}},w=function(h){h.code==="Enter"&&!te&&I()},z=function(){x.Z.confirm({style:{zIndex:"1002"},open:!0,title:"\u6E05\u7A7A\u8BB0\u5F55",content:"\u786E\u5B9A\u6E05\u7A7A\u548CChatGPT\u7684\u804A\u5929\u8BB0\u5F55\u5417",onOk:function(){var h=d()(s()().mark(function Y(){return s()().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:localStorage.removeItem(H),R([]),a.success("\u5DF2\u6E05\u7A7A\u8BB0\u5F55");case 3:case"end":return X.stop()}},Y)}));function P(){return h.apply(this,arguments)}return P}()})},F=function(h){ce()(h),q.ZP.success("\u5DF2\u590D\u5236\u5230\u526A\u8D34\u677F")};return(0,A.useEffect)(function(){B(le)},[le]),(0,A.useEffect)(function(){try{R(JSON.parse(localStorage.getItem(H)||""))}catch(E){localStorage.removeItem(H)}},[]),(0,A.useEffect)(function(){ee&&r()},[ee,g,g.length]),(0,f.jsxs)(f.Fragment,{children:[n,(0,f.jsxs)(S.Z,{className:"chatgpt-container",title:(0,f.jsx)("div",{className:"title",children:"ChatGPT\u5C0F\u52A9\u624B"}),placement:"left",width:600,closeIcon:(0,f.jsx)(f.Fragment,{}),onClose:k,maskClosable:!0,destroyOnClose:!0,open:ee,style:{zIndex:"1000"},children:[(0,f.jsx)("ul",{ref:N,children:((ue=g)===null||ue===void 0?void 0:ue.length)>0?g.map(function(E){var h=E.index,P=E.question,Y=E.answer,Q=E.createdAt,X=E.isEnd;return(0,f.jsxs)("li",{children:[(0,f.jsxs)("div",{className:"question",children:[(0,f.jsx)(v.C,{size:40,style:{minWidth:"40px",backgroundColor:"#1890FF",verticalAlign:"middle"},gap:1,children:"admin"}),(0,f.jsxs)("div",{className:"content",children:[(0,f.jsx)("div",{className:"time",children:Q}),(0,f.jsx)("p",{children:P})]})]}),(0,f.jsxs)("div",{className:"answer",children:[(0,f.jsx)("img",{className:"avatar",src:"/icons/chatgpt-logo.jpg"}),(0,f.jsxs)("div",{className:"content",children:[(0,f.jsx)("div",{className:"time",children:Q}),(0,f.jsxs)("p",{children:[Y,(0,f.jsx)("br",{}),X&&Y&&(0,f.jsx)(O.Z,{style:{float:"right"},type:"link",onClick:function(){return F(Y)},children:"\u590D\u5236"})]})]})]})]},h)}):(0,f.jsxs)("div",{className:"empty-chat",children:[(0,f.jsx)(j.Z,{}),(0,f.jsx)("span",{children:"\u8BF7\u5411\u6211\u63D0\u95EE\u5427~"})]})}),(0,f.jsxs)("div",{className:"footer",children:[(0,f.jsx)(O.Z,{className:"clear-btn",disabled:te||!g||((U=g)===null||U===void 0?void 0:U.length)<1,onClick:function(){return z()},children:(0,f.jsx)(L.Z,{})}),(0,f.jsx)(b.Z,{autoFocus:!0,onFocus:function(){return r()},onKeyDown:function(h){return w(h)},value:G,onChange:function(h){return B(h.target.value)},className:"input",placeholder:"\u8BF7\u8F93\u5165\u60A8\u7684\u95EE\u9898"}),(0,f.jsx)(O.Z,{className:"send-btn",disabled:te,onClick:function(){return I()},icon:(0,f.jsx)(J.Z,{}),type:"primary",children:"\u53D1\u9001"})]})]},"left")]})},se=c}}]);
